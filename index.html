<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Planner</title>

<style>
  body {
    font-family: Arial, sans-serif;
    margin: 20px;
    text-align: left;
  }

  h1, h2, h3 {
    text-align: left;
    margin-bottom: 6px;
  }

  .day-selector, #standalone-section {
    margin-bottom: 10px;
  }

  label {
    font-weight: bold;
    margin-right: 10px;
  }

  select {
    padding: 5px;
  }

  #generate-btn, #print-btn {
    padding: 8px 16px;
    font-size: 15px;
    cursor: pointer;
    margin: 10px 0;
    display: inline-block;
  }

  #output {
    margin-top: 30px;
  }

  .recipe {
    margin-bottom: 30px;
  }

  .print-page {
    page-break-before: always;
  }

  ul {
    list-style-type: disc;
    margin: 0;
    padding-left: 20px;
  }

  /* ---------- SHOPPING LIST ---------- */
  #shopping-page h2 {
    text-align: center;
    margin-bottom: 10px;
  }

  .shopping-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    column-gap: 40px;
  }

  .shopping-col h3 {
    margin: 8px 0 4px 0;
  }

  .shopping-col ul {
    margin: 0 0 10px 0;
    padding-left: 20px;
  }

  /* ---------- RECIPE SPACING ---------- */
  .recipe p {
    margin: 2px 0;
    line-height: 1.2;
  }

  /* ---------- PRINT RULES ---------- */
  @media print {
    body * {
      visibility: hidden;
    }

    #output, #output * {
      visibility: visible;
    }

    #output {
      position: absolute;
      left: 0;
      top: 0;
      width: 100%;
    }

    #generate-btn, #print-btn {
      display: none;
    }
  }
</style>
</head>
<body>

<h1>Weekly Meal Planner</h1>

<div id="selectors">
  <div class="day-selector"><label>Monday:</label><select id="monday"></select></div>
  <div class="day-selector"><label>Tuesday:</label><select id="tuesday"></select></div>
  <div class="day-selector"><label>Wednesday:</label><select id="wednesday"></select></div>
  <div class="day-selector"><label>Thursday:</label><select id="thursday"></select></div>
  <div class="day-selector"><label>Friday:</label><select id="friday"></select></div>
  <div class="day-selector"><label>Saturday:</label><select id="saturday"></select></div>
  <div class="day-selector"><label>Sunday:</label><select id="sunday"></select></div>
</div>

<hr>

<div id="standalone-section">
  <h3>Add Individual Items</h3>
  <div id="standalone-checkboxes"></div>
</div>

<button id="generate-btn">Generate Recipes & Shopping List</button>
<button id="print-btn" onclick="window.print()">Print / Save PDF</button>

<div id="output">
  <div id="shopping-list"></div>
  <div id="recipes"></div>
</div>

<script>
// -----------------------------
// Recipes
// -----------------------------
const recipes = [
  
  
  
  
  
  
  
  {
    name: "Chicken Pot Pie",
    ingredients: [
      { name: "chicken breasts", amount: 4, unit: "each", category: "Meat" },
      { name: "double crust pie pastry", amount: 1, unit: "each", category: "Bakery" },
      { name: "peas", amount: 1, unit: "can", category: "Produce" },
      { name: "carrots", amount: 1, unit: "can", category: "Produce" },
      { name: "corn", amount: 1, unit: "can", category: "Produce" },
      { name: "celery", amount: 1, unit: "stalk", category: "Produce" },
      { name: "onion", amount: 1, unit: "each", category: "Produce" },
      { name: "butter", amount: 3, unit: "tbsp", category: "Dairy" },
      { name: "all-purpose flour", amount: 3, unit: "tbsp", category: "Grocery" },
      { name: "chicken broth", amount: 1, unit: "cup", category: "Grocery" },
      { name: "milk", amount: 1, unit: "cup", category: "Dairy" },
      { name: "garlic powder", amount: 0.5, unit: "tsp", category: "Grocery" },
      { name: "onion powder", amount: 0.5, unit: "tsp", category: "Grocery" },
      { name: "salt", amount: 1, unit: "tsp", category: "Grocery" },
      { name: "pepper", amount: 0.5, unit: "tsp", category: "Grocery" }
    ],
    instructions: `PREP
Preheat the oven to 375 degrees
Get out a saucepan and 9 inch pie plate
Dice half the onion and the celery
Cook chicken and dice

In a saucepan over medium heat, melt the butter
Add diced onions and celery and cook 3 to 4 minutes until softened

Sprinkle in the flour and stir constantly for 1 minute to form a roux

Slowly whisk in chicken broth and milk
Add garlic powder, onion powder, salt, and pepper
Stir until the sauce thickens into a creamy gravy

Remove from heat and fold in the diced chicken, peas, carrots, and corn

Line a pie plate with half of the pie pastry
Pour the chicken mixture into the crust
Cover with remaining pie pastry
Crimp edges to seal and cut slits on top for steam

Bake for 45 minutes until crust is golden and filling is bubbling
Let rest 10 minutes before serving`
  },
  
  
  
  
  
  
  {
    name: "Lentil Soup",
    ingredients: [
      { name: "olive oil", amount: 2, unit: "tbsp", category: "Grocery" },
      { name: "onion", amount: 1, unit: "each", category: "Produce" },
      { name: "carrots", amount: 1, unit: "each", category: "Produce" },
      { name: "celery", amount: 1, unit: "stalk", category: "Produce" },
      { name: "kosher salt", amount: 2, unit: "tsp", category: "Grocery" },
      { name: "lentils", amount: 1, unit: "lb", category: "Grocery" },
      { name: "peeled and chopped tomatoes", amount: 1, unit: "can", category: "Grocery" },
      { name: "vegetable broth", amount: 2, unit: "quart", category: "Grocery" },
      { name: "ground coriander", amount: 0.5, unit: "tsp", category: "Grocery" },
      { name: "cumin", amount: 0.5, unit: "tsp", category: "Grocery" },
      { name: "grains of paradise", amount: 0.5, unit: "tsp", category: "Grocery" }
    ],
    instructions: `PREP
Get out a 6 quart dutch oven
Finely chop 1/2 cup of onion
Finely chop 1/2 cup of carrot
Finely chop 1/2 cup of celery
Open the can of tomatoes

Place the olive oil into the dutch oven over medium heat
Once hot, add the onion, carrot, and celery
Add salt

Sweat for 6 to 7 minutes until the onions are translucent

Add lentils, tomatoes, broth, coriander, cumin, grains of paradise
Stir to combine

Increase the heat to high and bring just to a boil

Cover, reduce heat to low, and simmer for 35 to 40 minutes until the lentils are tender
Serve immediately`
  },
  
  
    
  
  
  {
    name: "Winter Minestrone Soup",
    ingredients: [
      { name: "onion", amount: 1, unit: "each", category: "Produce" },
      { name: "celery", amount: 1, unit: "stalk", category: "Produce" },
      { name: "fennel", amount: 1, unit: "bulb", category: "Produce" },
      { name: "yukon gold potatoes", amount: 2, unit: "each", category: "Produce" },
      { name: "garlic", amount: 2, unit: "cloves", category: "Produce" },
      { name: "olive oil", amount: 1, unit: "tbsp", category: "Grocery" },
      { name: "crushed whole tomatoes", amount: 1, unit: "can", category: "Grocery" },
      { name: "vegetable broth", amount: 8, unit: "cups", category: "Grocery" },
      { name: "cannellini beans", amount: 1, unit: "can", category: "Grocery" },
      { name: "red wine vinegar", amount: 2, unit: "tsp", category: "Grocery" },
      { name: "swiss chard", amount: 1.5, unit: "bunch", category: "Produce" },
      { name: "short pasta", amount: 2, unit: "cups", category: "Grains" },
      { name: "grated parmesan cheese", amount: 1, unit: "cup", category: "Dairy" },
      { name: "salt", amount: 1, unit: "pinch", category: "Grocery" },
      { name: "pepper", amount: 1, unit: "pinch", category: "Grocery" }
    ],
    instructions: `PREP
Get out a large stock pot
Cut half an onion into 1/2 inch pieces
Slice celery crossways into 1/2 inch pieces
Cut half a bulb of fennel into 1 inch pieces
Peel and cut potatoes into 1 inch cubes
Thinly slice the swiss chard
Finely chop garlic
Open cannellini beans

Heat oil in a large stock pot over medium high heat
Add onion, celery, fennel, potatoes, and garlic
Cook, stirring occasionally, about 5 minutes
Add tomatoes and their juices, stock, and beans
Season with salt and pepper
Increase heat to high and bring to a boil
Reduce heat to a simmer and cook until potatoes are tender, about 10 minutes
Stir in vinegar and swiss chard, season with salt and pepper
Prepare the pasta to al dente following package directions
Divide pasta evenly between bowls
Pour soup over the pasta and garnish with cheese`
  },
  
  
  
  
  
  
  {
    name: "Recipe 4",
    ingredients: [

      { name: "stuff", amount: 0, unit: "each", category: "food" },



      
    ],
    instructions: `PREP
ENTER INSTRUCTIONS HERE`



  },
  
  
  
  
  
  
  {
    name: "recipie 5",
    ingredients: [
      { name: "olive oil", amount: 2, unit: "tbsp", category: "Grocery" },
      { name: "onion", amount: 1, unit: "each", category: "Produce" },
      { name: "carrots", amount: 1, unit: "each", category: "Produce" },
      { name: "celery", amount: 1, unit: "stalk", category: "Produce" },
      { name: "kosher salt", amount: 2, unit: "tsp", category: "Grocery" },
      { name: "lentils", amount: 1, unit: "lb", category: "Grocery" },
      { name: "peeled and chopped tomatoes", amount: 1, unit: "can", category: "Grocery" },
      { name: "vegetable broth", amount: 2, unit: "quart", category: "Grocery" },
      { name: "ground coriander", amount: 0.5, unit: "tsp", category: "Grocery" },
      { name: "cumin", amount: 0.5, unit: "tsp", category: "Grocery" },
      { name: "grains of paradise", amount: 0.5, unit: "tsp", category: "Grocery" }
    ],
    instructions: `PREP
Get out a 6 quart dutch oven
Finely chop 1/2 cup of onion
Finely chop 1/2 cup of carrot
Finely chop 1/2 cup of celery
Open the can of tomatoes

Place the olive oil into the dutch oven over medium heat
Once hot, add the onion, carrot, and celery
Add salt

Sweat for 6 to 7 minutes until the onions are translucent

Add lentils, tomatoes, broth, coriander, cumin, grains of paradise
Stir to combine

Increase the heat to high and bring just to a boil

Cover, reduce heat to low, and simmer for 35 to 40 minutes until the lentils are tender
Serve immediately`
  },
  
  
  {
    name: "recipie 6",
    ingredients: [
      { name: "olive oil", amount: 2, unit: "tbsp", category: "Grocery" },
      { name: "onion", amount: 1, unit: "each", category: "Produce" },
      { name: "carrots", amount: 1, unit: "each", category: "Produce" },
      { name: "celery", amount: 1, unit: "stalk", category: "Produce" },
      { name: "kosher salt", amount: 2, unit: "tsp", category: "Grocery" },
      { name: "lentils", amount: 1, unit: "lb", category: "Grocery" },
      { name: "peeled and chopped tomatoes", amount: 1, unit: "can", category: "Grocery" },
      { name: "vegetable broth", amount: 2, unit: "quart", category: "Grocery" },
      { name: "ground coriander", amount: 0.5, unit: "tsp", category: "Grocery" },
      { name: "cumin", amount: 0.5, unit: "tsp", category: "Grocery" },
      { name: "grains of paradise", amount: 0.5, unit: "tsp", category: "Grocery" }
    ],
    instructions: `PREP
Get out a 6 quart dutch oven
Finely chop 1/2 cup of onion
Finely chop 1/2 cup of carrot
Finely chop 1/2 cup of celery
Open the can of tomatoes

Place the olive oil into the dutch oven over medium heat
Once hot, add the onion, carrot, and celery
Add salt

Sweat for 6 to 7 minutes until the onions are translucent

Add lentils, tomatoes, broth, coriander, cumin, grains of paradise
Stir to combine

Increase the heat to high and bring just to a boil

Cover, reduce heat to low, and simmer for 35 to 40 minutes until the lentils are tender
Serve immediately`
  },  
  
  {
    name: "Leftovers",
    ingredients: [
      { name: "Leftovers", amount: 0, unit: "each", category: "Fridge" }
    ],
    instructions: `PREP
Get out of fridge
Microwave
Eat`
  }
];

// -----------------------------
// Standalone checkbox items
// -----------------------------
const standaloneItems = [
  { name: "milk", amount: 1, unit: "Gallon", category: "Dairy" },
  { name: "butter", amount: 1, unit: "lb", category: "Dairy" },
  { name: "chicken breast", amount: 1, unit: "lb", category: "Meat" },
  { name: "eggs", amount: 12, unit: "each", category: "Dairy" },
  { name: "bread", amount: 1, unit: "loaf", category: "Bakery" },
  { name: "cereal", amount: 1, unit: "box", category: "Grocery" },
  { name: "yogurt", amount: 1, unit: "box", category: "dairy" },
  { name: "Ice cream", amount: 1, unit: "loaf", category: "Dairy" },
  { name: "Bagles", amount: 1, unit: "box", category: "Bakery" },
  { name: "Bannanas", amount: 1, unit: "box", category: "Fruit" },
  { name: "Apples", amount: 1, unit: "box", category: "Fruit" },
  { name: "Grapes", amount: 1, unit: "box", category: "Fruit" },
  { name: "Oranges", amount: 1, unit: "loaf", category: "Fruit" },
  { name: "Tomatos", amount: 1, unit: "box", category: "Vegitables" },
  { name: "Tomatos", amount: 1, unit: "box", category: "Vegitables" },
  { name: "Tomatos", amount: 1, unit: "box", category: "Vegitables" },
  { name: "Tomatos", amount: 1, unit: "box", category: "Vegitables" },




  
  ];

// -----------------------------
// Unit conversion
// -----------------------------
const volumeToTsp = { tsp:1, tbsp:3, cup:48, pint:96, quart:192 };
const weightToOz = { oz:1, lb:16 };

// -----------------------------
// Fraction helpers
// -----------------------------
function gcd(a,b){return b===0?a:gcd(b,a%b);}
function toMixedFraction(value){
  const whole=Math.floor(value),frac=value-whole;
  if(frac===0) return `${whole}`;
  const denominators=[2,3,4,6,8,12,16];
  let bestNumerator=1,bestDenominator=2,minError=Infinity;
  for(let d of denominators){
    let n=Math.round(frac*d),error=Math.abs(frac-n/d);
    if(error<minError && n>0){bestNumerator=n;bestDenominator=d;minError=error;}
  }
  const divisor=gcd(bestNumerator,bestDenominator);
  const numerator=bestNumerator/divisor;
  const denominator=bestDenominator/divisor;
  if(whole===0) return `${numerator}/${denominator}`;
  return `${whole} ${numerator}/${denominator}`;
}

// -----------------------------
// Shopping list builder
// -----------------------------
function generateShoppingColumns(allIngredients){
  const totals={};

  allIngredients.forEach(ing=>{
    let amount=ing.amount,unit=ing.unit;
    if(volumeToTsp[unit]){amount*=volumeToTsp[unit];unit="tsp";}
    else if(weightToOz[unit]){amount*=weightToOz[unit];unit="oz";}
    if(!totals[ing.name]) totals[ing.name]={amount:0,unit,category:ing.category||"Other"};
    totals[ing.name].amount+=amount;
  });

  const categories={};
  for(let name in totals){
    const {amount,unit,category}=totals[name];
    if(!categories[category]) categories[category]=[];
    categories[category].push({name,amount,unit});
  }

  const orderedCats=Object.keys(categories).sort();
  orderedCats.forEach(cat=>{
    categories[cat].sort((a,b)=>a.name.localeCompare(b.name));
  });

  const rows=[];
  orderedCats.forEach(cat=>{
    rows.push({type:"header", text:cat});
    categories[cat].forEach(item=>{
      rows.push({type:"item", item});
    });
  });

  const ROWS_PER_COLUMN=42;

  const col1=[];
  const col2=[];
  let currentCol=col1;
  let rowCount=0;
  let currentCategory=null;

  rows.forEach(row=>{
    if(rowCount>=ROWS_PER_COLUMN){
      currentCol=col2;
      rowCount=0;
      if(currentCategory){
        currentCol.push({type:"header", text:currentCategory});
        rowCount++;
      }
    }

    currentCol.push(row);
    rowCount++;

    if(row.type==="header") currentCategory=row.text;
  });

  function renderColumn(col){
    let html="";
    let open=false;
    col.forEach(row=>{
      if(row.type==="header"){
        if(open) html+="</ul>";
        html+=`<h3>${row.text}</h3><ul>`;
        open=true;
      } else {
        const i=row.item;
        if(i.unit==="tsp"){
          let cups=Math.floor(i.amount/volumeToTsp.cup);i.amount-=cups*volumeToTsp.cup;
          let tbsp=Math.floor(i.amount/volumeToTsp.tbsp);i.amount-=tbsp*volumeToTsp.tbsp;
          let tsp=i.amount;
          let parts=[];
          if(cups) parts.push(`${cups} cup`);
          if(tbsp) parts.push(`${tbsp} tbsp`);
          if(tsp) parts.push(`${toMixedFraction(tsp)} tsp`);
          html+=`<li>${i.name}: ${parts.join(" + ")}</li>`;
        } else if(i.unit==="oz"){
          let lbs=Math.floor(i.amount/weightToOz.lb);i.amount-=lbs*weightToOz.lb;
          let oz=i.amount;
          let parts=[];
          if(lbs) parts.push(`${lbs} lb`);
          if(oz) parts.push(`${toMixedFraction(oz)} oz`);
          html+=`<li>${i.name}: ${parts.join(" + ")}</li>`;
        } else {
          html+=`<li>${i.name}: ${toMixedFraction(i.amount)} ${i.unit}</li>`;
        }
      }
    });
    if(open) html+="</ul>";
    return html;
  }

  return `
    <div id="shopping-page" class="print-page">
      <h2>Shopping List</h2>
      <div class="shopping-grid">
        <div class="shopping-col">${renderColumn(col1)}</div>
        <div class="shopping-col">${renderColumn(col2)}</div>
      </div>
    </div>
  `;
}

// -----------------------------
// UI Setup
// -----------------------------
document.addEventListener("DOMContentLoaded",()=>{
  const days=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"];

  days.forEach(day=>{
    const select=document.getElementById(day);
    recipes.forEach(r=>{
      const option=document.createElement("option");
      option.value=r.name;
      option.textContent=r.name;
      select.appendChild(option);
    });
  });

  const boxContainer=document.getElementById("standalone-checkboxes");
  standaloneItems.forEach((item,i)=>{
    const label=document.createElement("label");
    label.style.display="block";
    const cb=document.createElement("input");
    cb.type="checkbox";
    cb.value=i;
    label.appendChild(cb);
    label.appendChild(document.createTextNode(` ${item.name} (${item.unit})`));
    boxContainer.appendChild(label);
  });

  document.getElementById("generate-btn").addEventListener("click",()=>{
    const selectedRecipes=[];
    days.forEach(day=>{
      const recipe=recipes.find(r=>r.name===document.getElementById(day).value);
      if(recipe) selectedRecipes.push(recipe);
    });

    const checkedStandalone=Array.from(
      document.querySelectorAll("#standalone-checkboxes input:checked")
    ).map(cb=>standaloneItems[cb.value]);

    const allIngredients=[
      ...selectedRecipes.flatMap(r=>r.ingredients),
      ...checkedStandalone
    ];

    document.getElementById("shopping-list").innerHTML=
      generateShoppingColumns(allIngredients);

    const recipesDiv=document.getElementById("recipes");
    recipesDiv.innerHTML="";
    selectedRecipes.forEach(r=>{
      const div=document.createElement("div");
      div.className="recipe print-page";
      let html=`<h2>${r.name}</h2><h3>Ingredients</h3><ul>`;
      r.ingredients.forEach(ing=>{
        html+=`<li>${toMixedFraction(ing.amount)} ${ing.unit} ${ing.name}</li>`;
      });
      html+="</ul><h3>Instructions</h3>";
      r.instructions.split("\n").forEach(line=>{
        if(line.trim()==="") html+="<p>&nbsp;</p>";
        else html+=`<p>${line}</p>`;
      });
      div.innerHTML=html;
      recipesDiv.appendChild(div);
    });
  });
});
</script>
</body>
</html>
